<script type="text/html" id="illusion-pane-template">
    <div class="row">
        <div class="col-md-4">
            <div class="img-rounded" style="background-color:#428bca;display:inline-block">
                <img class="img-rounded" style="opacity:.5" data-bind="attr:{src: '/media/images/heroes/' + selectedHero().heroName + '.png'}"/>
            </div>
        </div>
        <div class="col-md-4">
            <label for="illusionlevel" data-bind="text: illusionDisplayName"></label>
            <table class="table">
                <tbody>
                <tr>
                    <td>Damage Dealt</td>
                    <td class="text-right" data-bind="text: (getOutgoingDamageMultiplier(illusionType(), false, hero().attacktype())*100).toFixed(0)+'%'"></td>
                </tr>
                <tr>
                    <td>Damage Taken</td>
                    <td class="text-right" data-bind="text: (getIncomingDamageMultiplier(illusionType(), false, hero().attacktype())*100).toFixed(0)+'%'"></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-4">
            <div data-bind="visible: illusionType() != 'item_manta'">
                <label for="illusionlevel">Ability Level</label>
                <select id="illusionlevel" class="form-control" data-bind="value: illusionAbilityLevel, foreach: new Array(illusionAbilityMaxLevel())">
                    <option data-bind="text: $index()+1"></option>
                </select>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4" data-bind="css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <h3 class="col-md-12">Stats <a class="btn btn-default btn-xs" data-bind="toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}"></a></h3>

                <div class="col-md-12" data-bind="visible: showStatDetails(), css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}, template: {name: 'stats-additional-template'}">
                </div>
                <div class="statscontainer" data-bind="foreach: $root.allItems">
                    <div data-bind="template: { name: $data.value + '-template', data: $parentContext.$data}"></div>
                </div>
            </div>
        </div>
        <div class="col-md-8" data-bind="css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }">Inventory <small style="color:goldenrod" data-bind="html: inventory.totalCost() ? '<img src=\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\'/> ' + inventory.totalCost() : '' "></small></h3>
                    <div id="inventory" class="inventory hover-cursor" data-bind="click: function (data, event) { buildExplorer.selectInventory(-1); }, css: {'row-highlight': selectedInventory() == -1}, foreach: inventory.items, visible: sectionDisplay().inventory()">
                        <div class="btn-group">
                            <img style="width:75px;" class="img-rounded" data-bind="css: { item_disabled: !enabled(), item_active: $parent.inventory.getActiveBorder($data) == 1, item_inactive: $parent.inventory.getActiveBorder($data) == 0 }, attr:{ src: $parent.inventory.getItemImage($data) }, click: function(data, event) { $parent.inventory.toggleItem($index, data, event); }, event: { dblclick: $parent.inventory.removeItem }"/>
                            <div style="float:left" data-bind="visible: $parent.inventory.getItemSizeLabel($data) != ''">
                                <div data-bind="html: $parent.inventory.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;opacity:.5;background-color:black;padding:0px 2px"></div>
                                <div data-bind="html: $parent.inventory.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;padding:0px 2px"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="clone-pane-template">
    <div class="row">
        <div class="col-md-4">
            <img class="img-rounded" data-bind="attr:{src: '/media/images/heroes/meepo.png'}"/>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4" data-bind="css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <h3 class="col-md-12">Stats <a class="btn btn-default btn-xs" data-bind="toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}"></a></h3>

                <div class="col-md-12" data-bind="visible: showStatDetails(), css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}, template: {name: 'stats-additional-template'}"></div>

                <div class="statscontainer" data-bind="foreach: $root.allItems">
                    <div data-bind="template: { name: $data.value + '-template', data: $root.heroes[$parentContext.$index()].clone()}"></div>
                </div>
            </div>

            <div class="row" data-bind="visible: showDamageDetails()">
                <div class="col-md-12">
                    <h3 style="display:block;" class="section_header" data-bind="toggle: showDamageDetails, css: { section_disabled: !showDamageDetails() }">Damage Details
                        <span class="pull-right">
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('physical')}">Physical</small>
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('magic')}">Magical</small>
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('pure')}">Pure</small>
                        </span>
                    </h3>
                    <table class="table">
                        <tbody>
                            <tr>
                                <td></td>
                                <td class="text-right"><strong>Unmitigated</strong></td>
                                <td class="text-right"><strong><abbr data-bind="attr: {title: 'After reductions from ' + enemy().hero().displayname()}">After Reductions</abbr></strong></td>
                            </tr>
                            <tr>
                                <td><abbr title="Sum of damage sources">Damage Per Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().total.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'total'), diffStyle: $root.getDiffMagnitude($data, 'total'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalReduced.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalReduced'), diffStyle: $root.getDiffMagnitude($data, 'totalReduced'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().geminateAttack.active">
                                <td class="indent"><abbr title="Sum of damage sources + geminate attack damage">with Geminate Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalGeminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalGeminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'totalGeminateAttack'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalGeminateAttackReduced.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalGeminateAttackReduced'), diffStyle: $root.getDiffMagnitude($data, 'totalGeminateAttackReduced'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                                <td class="indent"><abbr title="Sum of damage sources + average crit damage per attack">with Crit:</abbr></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().sumTotal.toFixed(2)"></span></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().sumTotalReduced.toFixed(2)"></span></td>
                            </tr>
                            <tr>
                                <td><abbr title="Damage per attack * attacks per second">DPS:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.base.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.base'), diffStyle: $root.getDiffMagnitude($data, 'dps.base'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.reduced.base.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.reduced.base'), diffStyle: $root.getDiffMagnitude($data, 'dps.reduced.base'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().geminateAttack.active">
                                <td class="indent"><abbr title="(Damage per attack * attacks per second) + average geminate attack dps">with Geminate Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.geminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.geminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'dps.geminateAttack'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.reduced.geminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.reduced.geminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'dps.reduced.geminateAttack'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                                <td class="indent"><abbr data-bind="attr: { title: damageTotalInfo().geminateAttack.active ? 'Damage per attack (including crit) * attacks per second + average geminate attack dps' : 'Damage per attack (including crit) * attacks per second' }, text: damageTotalInfo().geminateAttack.active ? 'with Crit and Geminate Attack' : 'with Crit:' "></abbr></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().dps.total.toFixed(2)"></span></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().dps.reduced.total.toFixed(2)"></span></td>
                            </tr>
                            <tr><td colspan=3><strong><abbr title="with %chance taken into account">Damage Sources</abbr></strong></td></tr>
                            <tr>
                                <td>Base Damage</td>
                                <td class="text-right">
                                    <span data-bind="html: ((baseDamage()[0] + baseDamage()[1])/2).toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffText(((baseDamage()[0] + baseDamage()[1])/2).toFixed(2) - ((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2).toFixed(2)), diffStyle: (((baseDamage()[0] + baseDamage()[1])/2).toFixed(2) - ((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2).toFixed(2)), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffText(getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2) - getReducedDamage((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2, 'physical').toFixed(2)), diffStyle: (getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2) - getReducedDamage((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2, 'physical').toFixed(2)), visible: showDiff"></span>
                                </td>
                            </tr>
                        </tbody>
                        <tbody data-bind="foreach: damageTotalInfo().sources">
                            <tr>
                                <td><span data-bind="text: $data.name"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damage.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damageReduced.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                            </tr>
                        </tbody>

                        <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                            <td colspan=2><strong>Critical Strike</strong></td>
                        </tr>
                        
                        <tbody data-bind="foreach: damageTotalInfo().sourcesCrit">
                            <tr>
                                <td><span data-bind="text: $data.name"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damage.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damageReduced.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                            </tr>
                        </tbody>
                    
                        <tbody>
                            <tr data-bind="visible: cleaveInfo().length > 0">
                                <td colspan=3><strong>Cleave</strong></td>
                            </tr>
                        </tbody>    
                        <tbody data-bind="foreach: cleaveInfo()">
                            <tr><td>Radius:</td><td class="text-right"><span data-bind="html: $data.radius"></span></td></tr>
                            <tr><td>Magnitude:</td><td class="text-right"><span data-bind="html: ($data.magnitude * 100).toFixed(2) + '%'"></span></td></tr>
                            <tr>
                                <td>Cleave Damage:</td>
                                <td class="text-right"><span data-bind="html: ($data.magnitude * $parent.damageTotalInfo().total).toFixed(2)"></span></td>
                            </tr>
                        </tbody>
                    
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-8" data-bind="css: {'col-md-8': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }">Inventory <small style="color:goldenrod" data-bind="html: inventory.totalCost() ? '<img src=\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\'/> ' + inventory.totalCost() : '' "></small></h3>
                    <div id="inventory" class="inventory hover-cursor" data-bind="click: function (data, event) { buildExplorer.selectInventory(-1); }, css: {'row-highlight': selectedInventory() == -1}, template: { name: 'item-template', foreach: inventory.items }, visible: sectionDisplay().inventory()"></div>
                </div>
            </div>

            <div class="row" data-bind="template: { name: 'damage-amp-template'}"></div>
        </div>
    </div>
</script>
<script type="text/html" id="unit-pane-template">
    <div class="row">
        <div class="col-md-4">
            <img class="img-rounded" data-bind="attr:{src: selectedUnit().image}"/>
        </div>
        <div class="col-md-4">
            <label for="unitselect">Unit</label>
            <select id="unitselect" class="form-control" data-bind="options: availableUnits , optionsText: 'heroDisplayName', value: selectedUnit"></select>
        </div>
        <div class="col-md-4">
            <label for="unitlevel">Level</label>
            <p class="form-control-static" data-bind="visible: selectedUnit().levels == 0, text: hero().level"></p>
            <select id="herolevel" class="form-control" data-bind="visible: selectedUnit().levels > 0, value: selectedUnitLevel, foreach: new Array(selectedUnit().levels)">
                <option data-bind="text: $index()+1"></option>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4" data-bind="css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <h3 class="col-md-12">Stats <a class="btn btn-default btn-xs" data-bind="toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}"></a></h3>

                <div class="col-md-3" data-bind="visible: showStatDetails(), template: {name: 'stats-additional-template'}"></div>
                
                <div class="col-md-12" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
                    <table class="table table-condensed">
                    <tbody>
                    <tr><td>Gold:</td><td class="text-right"><span data-bind="text: hero().bountygoldmin() == hero().bountygoldmax() ? hero().bountygoldmax() : hero().bountygoldmin() + '-' + hero().bountygoldmax()"></span></td></tr>
                    <tr><td>Experience:</td><td class="text-right"><span data-bind="text: hero().bountyxp()"></span></td></tr>
                    <tr><td>Level:</td><td class="text-right"><span data-bind="text: hero().level()"></span></td></tr>
                    <tr><td><abbr title="Movement Speed">MS</abbr>:</td><td class="text-right"><span data-bind="text: totalMovementSpeed"></span></td></tr>
                    <tr><td>Turn Rate:</td><td class="text-right"><span data-bind="text: totalTurnRate"></span></td></tr>
                    <tr><td>Sight Range:</td><td class="text-right"><span data-bind="html: '<abbr title=\'Day\'>' + visionrangeday() + '</abbr>/<abbr title=\'Night\'>' + visionrangenight() + '</abbr>'"></span></td></tr>
                    </tbody>
                    </table>
                </div>


                <div class="col-md-12" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
                    <table class="table table-condensed">
                    <tbody>
                    <tr><td>Health:</td><td class="text-right"><span data-bind="text: health"></span></td></tr>
                    <tr><td>Health Regen:</td><td class="text-right"><span data-bind="text: healthregen"></span></td></tr>
                    <tr><td>Mana:</td><td class="text-right"><span data-bind="text: mana"></span></td></tr>
                    <tr><td>Mana Regen:</td><td class="text-right"><span data-bind="text: manaregen"></span></td></tr>
                    <tr><td>Physical <abbr title="Effective Hit Points">EHP</abbr>:</td><td class="text-right"><span data-bind="text: ehpPhysical"></span></td></tr>
                    <tr><td>Magical <abbr title="Effective Hit Points">EHP</abbr>:</td><td class="text-right"><span data-bind="text: ehpMagical"></span></td></tr>
                    </tbody>
                    </table>
                </div>

                <div class="col-md-12" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
                    <table class="table table-condensed">
                    <tbody>
                    <tr><td>Armor:</td><td class="text-right"><span data-bind="text: totalArmorPhysical"></span></td></tr>
                    <tr><td>Magic Res:</td><td class="text-right"><span data-bind="html: totalMagicResistance().toFixed(2) + '%'"></span></td></tr>
                    <tr><td>Lifesteal:</td><td class="text-right"><span data-bind="text: lifesteal"></span></td></tr>
                    <tr><td>Evasion:</td><td class="text-right"><span data-bind="text: evasion"></span></td></tr>
                    <tr><td>Bash:</td><td class="text-right"><span data-bind="text: bash"></span></td></tr>
                    <tr><td>Miss Chance:</td><td class="text-right"><span data-bind="text: missChance"></span></td></tr>
                    <tr><td colspan=2><a class="btn btn-default btn-block btn-xs" data-bind="css: {disabled: critInfo().sources.length == 0 ? 'disabled' : '', 'toggled': showCriticalStrikeDetails}, toggle: showCriticalStrikeDetails">Critical Strike Details</a></td></tr>
                    </tbody>
                    <tbody class="tabledropdown" style="border-top:0" data-bind="visible: showCriticalStrikeDetails(),foreach: critInfo().sources">
                    <tr><td colspan=2><strong data-bind="text: $data.name"></strong></td></tr>
                    <tr><td>Crit Chance:</td><td class="text-right"><span data-bind="text: ($data.totalchance * 100).toFixed(2) + '%'"></span></td></tr>
                    <tr><td>Crit Multiplier:</td><td class="text-right"><span data-bind="text: ($data.multiplier * 100).toFixed(2) + '%'"></span></td></tr>
                    </tbody>
                    </table>
                </div>

                <div class="col-md-12" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
                    <table class="table table-condensed">
                    <tbody>
                    <tr>
                        <td>Damage:</td>
                        <td class="text-right">
                            <span data-bind="html: baseDamage()[0] + '-' + baseDamage()[1]"></span>
                            <span style="color:green" data-bind="visible: bonusDamage() > 0, text: ' + ' + bonusDamage()"></span>
                            <span style="color:red" data-bind="visible: bonusDamageReduction() != 0, text: ' - ' + bonusDamageReduction()"></span>
                        </td>
                    </tr>
                    <tr><td><abbr title="Increased Attack Speed">IAS</abbr>:</td><td class="text-right"><span data-bind="text: ias"></span></td></tr>
                    <tr><td><abbr title="Base Attack Time">BAT</abbr>:</td><td class="text-right"><span data-bind="text: bat"></span></td></tr>
                    <tr><td>Attack Time:</td><td class="text-right"><span data-bind="text: attackTime"></span></td></tr>
                    <tr><td>Attack / Sec:</td><td class="text-right"><span data-bind="text: attacksPerSecond().toFixed(2)"></span></td></tr>
                    <tr><td>Attack Range:</td><td class="text-right"><span data-bind="text: totalattackrange"></span></td></tr>
                    <tr><td colspan=2><a class="btn btn-default btn-block btn-xs" data-bind="toggle: showDamageDetails, css: {'toggled': showDamageDetails}">Damage Details</a></td></tr>
                    </tbody>
                    </table>
                </div>
            </div>

            <div class="row" data-bind="visible: showDamageDetails()">
                <div class="col-md-12">
                    <h3 style="display:block;" class="section_header" data-bind="toggle: showDamageDetails, css: { section_disabled: !showDamageDetails() }">Damage Details
                        <span class="pull-right">
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('physical')}">Physical</small>
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('magic')}">Magical</small>
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('pure')}">Pure</small>
                        </span>
                    </h3>
                    <table class="table">
                        <tbody>
                            <tr>
                                <td></td>
                                <td class="text-right"><strong>Unmitigated</strong></td>
                                <td class="text-right"><strong><abbr data-bind="attr: {title: 'After reductions from ' + enemy().hero().displayname()}">After Reductions</abbr></strong></td>
                            </tr>
                            <tr>
                                <td><abbr title="Sum of damage sources">Damage Per Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().total.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'total'), diffStyle: $root.getDiffMagnitude($data, 'total'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalReduced.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalReduced'), diffStyle: $root.getDiffMagnitude($data, 'totalReduced'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().geminateAttack.active">
                                <td class="indent"><abbr title="Sum of damage sources + geminate attack damage">with Geminate Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalGeminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalGeminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'totalGeminateAttack'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalGeminateAttackReduced.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalGeminateAttackReduced'), diffStyle: $root.getDiffMagnitude($data, 'totalGeminateAttackReduced'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                                <td class="indent"><abbr title="Sum of damage sources + average crit damage per attack">with Crit:</abbr></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().sumTotal.toFixed(2)"></span></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().sumTotalReduced.toFixed(2)"></span></td>
                            </tr>
                            <tr>
                                <td><abbr title="Damage per attack * attacks per second">DPS:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.base.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.base'), diffStyle: $root.getDiffMagnitude($data, 'dps.base'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.reduced.base.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.reduced.base'), diffStyle: $root.getDiffMagnitude($data, 'dps.reduced.base'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().geminateAttack.active">
                                <td class="indent"><abbr title="(Damage per attack * attacks per second) + average geminate attack dps">with Geminate Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.geminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.geminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'dps.geminateAttack'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.reduced.geminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.reduced.geminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'dps.reduced.geminateAttack'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                                <td class="indent"><abbr data-bind="attr: { title: damageTotalInfo().geminateAttack.active ? 'Damage per attack (including crit) * attacks per second + average geminate attack dps' : 'Damage per attack (including crit) * attacks per second' }, text: damageTotalInfo().geminateAttack.active ? 'with Crit and Geminate Attack' : 'with Crit:' "></abbr></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().dps.total.toFixed(2)"></span></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().dps.reduced.total.toFixed(2)"></span></td>
                            </tr>
                            <tr><td colspan=3><strong><abbr title="with %chance taken into account">Damage Sources</abbr></strong></td></tr>
                            <tr>
                                <td>Base Damage</td>
                                <td class="text-right">
                                    <span data-bind="html: ((baseDamage()[0] + baseDamage()[1])/2).toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffText(((baseDamage()[0] + baseDamage()[1])/2).toFixed(2) - ((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2).toFixed(2)), diffStyle: (((baseDamage()[0] + baseDamage()[1])/2).toFixed(2) - ((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2).toFixed(2)), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffText(getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2) - getReducedDamage((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2, 'physical').toFixed(2)), diffStyle: (getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2) - getReducedDamage((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2, 'physical').toFixed(2)), visible: showDiff"></span>
                                </td>
                            </tr>
                        </tbody>
                        <tbody data-bind="foreach: damageTotalInfo().sources">
                            <tr>
                                <td><span data-bind="text: $data.name"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damage.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damageReduced.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                            </tr>
                        </tbody>

                        <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                            <td colspan=2><strong>Critical Strike</strong></td>
                        </tr>
                        
                        <tbody data-bind="foreach: damageTotalInfo().sourcesCrit">
                            <tr>
                                <td><span data-bind="text: $data.name"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damage.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damageReduced.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                            </tr>
                        </tbody>
                    
                        <tbody>
                            <tr data-bind="visible: cleaveInfo().length > 0">
                                <td colspan=3><strong>Cleave</strong></td>
                            </tr>
                        </tbody>    
                        <tbody data-bind="foreach: cleaveInfo()">
                            <tr><td>Radius:</td><td class="text-right"><span data-bind="html: $data.radius"></span></td></tr>
                            <tr><td>Magnitude:</td><td class="text-right"><span data-bind="html: ($data.magnitude * 100).toFixed(2) + '%'"></span></td></tr>
                            <tr>
                                <td>Cleave Damage:</td>
                                <td class="text-right"><span data-bind="html: ($data.magnitude * $parent.damageTotalInfo().total).toFixed(2)"></span></td>
                            </tr>
                        </tbody>
                    
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-8" data-bind="css: {'col-md-8': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }">Inventory <small style="color:goldenrod" data-bind="html: inventory.totalCost() ? '<img src=\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\'/> ' + inventory.totalCost() : '' "></small></h3>
                    <div id="inventory" class="inventory hover-cursor" data-bind="click: function (data, event) { buildExplorer.selectInventory(-1); }, css: {'row-highlight': selectedInventory() == -1}, template: { name: 'item-template', foreach: inventory.items }, visible: sectionDisplay().inventory()"></div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().ability, css: { section_disabled: !sectionDisplay().ability() }">Abilities <small style="color:inherit" data-bind="text: availableSkillPoints() ? (availableSkillPoints() == 1 ? '1 unspent skillpoint' : availableSkillPoints() + ' unspent skillpoints') : ''"></small></h3>
                    <div class="row" data-bind="template: { name: 'ability-template', foreach: ability().abilities }, visible: sectionDisplay().ability()"></div>
                    <div class="form-horizontal" data-bind="if: selectedHero().heroName == 'silencer', visible: sectionDisplay().ability()">
                        <div class="form-group">
                                <div class="col-md-2 control-label">
                                    <label for="intelligencestolen">Intelligence Stolen</label>
                                </div>
                                <div class="col-md-2">
                                    <input class="form-control" id="intelligencestolen" data-bind="value: intStolen" />
                                </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().buff, css: { section_disabled: !sectionDisplay().buff() }">Buffs</h3>
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().buff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <select id="buffselect" class="form-control" data-bind="options: buffs.availableBuffs , optionsText: 'buffDisplayName', value: buffs.selectedBuff"></select>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: buffs.addBuff">Add</button>
                                <button class="btn btn-default" data-bind="click: function(data,event) { buffs.removeBuff(data, event, buffs.selectedBuff().buffName) }">Remove</button>
                            </div>
                        </div>
                    </div>
                    <div class="row" data-bind="foreach: buffs.buffs, visible: sectionDisplay().buff()">
                        <div data-bind="css: {row: $data.data.isDetail() || ($index() < $parent.buffs.buffs().length-1 && $parent.buffs.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.buffs.buffs().length-1 && $parent.buffs.buffs()[$index()+1].data.isDetail()) }">
                            <div class="col-md-3 text-center bottom-buffer2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                                <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.data.isActive() || $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name() + '.png'}, click: function(data, event) { $parent.buffs.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.buffs.removeBuff(data, event, $data.data.name()) } }"/>
                                <div class="progress" style="position:relative">
                                    <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)"></div>
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }"></div>
                                </div>
                                <div class="btn-group btn-group-justified" data-bind="if: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.buffs.levelDownAbility($index, data.data, event, $parent); }">-</a>
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.buffs.levelUpAbility($index, data.data, event, $parent); }">+</a>
                                </div>
                                <div class="btn-group btn-group-justified">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.buffs.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}">Details</a>
                                </div>
                            </div>
                            <div class="col-md-9 bottom-buffer" data-bind="visible: $data.data.isDetail()">
                                <button type="button" class="close" data-bind="click: function(data, event) { $parent.buffs.toggleBuffDetail($index, data.data, event); }">&times;</button>
                                <div data-bind="html: $parent.ability().getAbilityTooltipData($data.hero, $data.data.name())"></div>
                                <div data-bind="if: $data.data.name() in $parent.buffs.abilityData && $parent.buffs.buffs()[$index()].data.level() > 0">
                                    <div class="col-md-8">
                                        <div data-bind="template: { name: 'buff-settings-template', data: $parent.buffs.abilitySettingsData($data.data.name(), $parent, $index()) }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().buff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input class="form-control" id="auto2" data-bind="attr: {id: id() + '-auto2' }, jqAuto: { autoFocus: true, html: true }, jqAutoSource: buffs.itemBuffs.itemBuffOptions, jqAutoValue: buffs.itemBuffs.selectedItemBuff, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" data-bind="jqAutoCombo: id() + '-auto2'"><span class="glyphicon glyphicon-search"></span></button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: buffs.itemBuffs.addItemBuff">Add</button>
                            </div>
                        </div>
                    </div>
                    <div data-bind="foreach: buffs.itemBuffs.items, visible: sectionDisplay().buff()">
                        <div class="pull-left" style="margin-right:10px" data-bind="template: { name: 'item-buff-template'}"></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().debuff, css: { section_disabled: !sectionDisplay().debuff() }">Debuffs</h3>
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().debuff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <select id="buffselect" class="form-control" data-bind="options: debuffs.availableDebuffs , optionsText: 'buffDisplayName', value: debuffs.selectedBuff"></select>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: debuffs.addBuff">Add</button>
                                <button class="btn btn-default" data-bind="click: function(data,event) { debuffs.removeBuff(data, event, debuffs.selectedBuff().buffName) }">Remove</button>
                            </div>
                        </div>
                    </div>

                    <div class="row" data-bind="foreach: debuffs.buffs, visible: sectionDisplay().debuff()">
                        <div data-bind="css: {row: $data.data.isDetail() || ($index() < $parent.debuffs.buffs().length-1 && $parent.debuffs.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.debuffs.buffs().length-1 && $parent.debuffs.buffs()[$index()+1].data.isDetail()) }">
                            <div class="col-md-3 text-center bottom-buffer2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                                <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.data.isActive() || $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name() + '.png'}, click: function(data, event) { $parent.debuffs.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.debuffs.removeBuff(data, event, $data.data.name()) } }"/>
                                <div class="progress" style="position:relative">
                                    <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)"></div>
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }"></div>
                                </div>
                                <div class="btn-group btn-group-justified" data-bind="if: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.debuffs.levelDownAbility($index, data.data, event, $parent); }">-</a>
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.debuffs.levelUpAbility($index, data.data, event, $parent); }">+</a>
                                </div>
                                <div class="btn-group btn-group-justified">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.debuffs.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}">Details</a>
                                </div>
                            </div>
                            <div class="col-md-9 bottom-buffer" data-bind="visible: $data.data.isDetail()">
                                <button type="button" class="close" data-bind="click: function(data, event) { $parent.debuffs.toggleBuffDetail($index, data.data, event); }">&times;</button>
                                <div data-bind="html: $parent.ability().getAbilityTooltipData($data.hero, $data.data.name())"></div>
                                <div data-bind="if: $data.data.name() in $parent.debuffs.abilityData && $parent.debuffs.buffs()[$index()].data.level() > 0">
                                    <div class="col-md-8">
                                        <div data-bind="template: { name: 'buff-settings-template', data: $parent.debuffs.abilitySettingsData($data.data.name(), $parent, $index()) }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().debuff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input class="form-control" id="auto3" data-bind="attr: {id: id() + '-auto3' }, jqAuto: { autoFocus: true, html: true }, jqAutoSource: debuffs.itemBuffs.itemDebuffOptions, jqAutoValue: debuffs.itemBuffs.selectedItemDebuff, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" data-bind="jqAutoCombo: id() + '-auto3'"><span class="glyphicon glyphicon-search"></span></button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: debuffs.itemBuffs.addItemDebuff">Add</button>
                            </div>
                        </div>
                    </div>
                    <div data-bind="foreach: debuffs.itemBuffs.items, visible: sectionDisplay().debuff()">
                        <div class="pull-left" style="margin-right:10px" data-bind="template: { name: 'item-debuff-template'}"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="hero-pane-template">
    <div class="row">
        <div class="col-md-4">
            <img class="img-rounded" data-bind="attr:{src: '/media/images/heroes/' + selectedHero().heroName + '.png'}"/>
        </div>
        <div class="col-md-4">
            <label for="heroselect">Hero</label>
            <select id="heroselect" class="form-control" data-bind="options: availableHeroes , optionsText: 'heroDisplayName', value: selectedHero"></select>
        </div>
        <div class="col-md-4">
            <label for="herolevel">Level</label>
            <input id="herolevel" data-bind="spinner: selectedHeroLevel, spinnerOptions: { min: 1, max: 25 }">
        </div>
        <div class="col-md-offset-4 col-md-8 checkbox" style="margin-top:0px;margin-bottom:0px;padding-left:34px;" data-bind="visible: $root.layout() == 0">
            <label><input type="checkbox" style="float:none;margin-right:5px;" data-bind="checked: showDiff"><span style="font-size:12px">Show <abbr title="The difference between two adjacent hero tabs shown next to each stat.">delta values</abbr>. <span data-bind="visible: showDiff">Comparing level <span data-bind="text: selectedHeroLevel"></span> <span data-bind="text: hero().displayname"></span> to level <span data-bind="text: heroCompare().selectedHeroLevel"></span> <span data-bind="text: heroCompare().hero().displayname"></span>.</span></span></label>
            <label style="margin-left:25px;font-size:12px;"><input type="checkbox" style="float:none;margin-right:5px;" data-bind="checked: showUnitTab">Show unit tab</label>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4" data-bind="css: {'col-md-4': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <h3 class="col-md-12">Stats <a class="btn btn-default btn-xs" data-bind="toggle: showStatDetails, text: !showStatDetails() ? 'Show more' : 'Show less', attr: {title: !showStatDetails() ? 'Click to show base stats' : 'Click to hide base stats'}"></a>
                    <div class="checkbox" style="margin-left:15px;display:inline;" data-bind="style: {'display': $root.layout() == 1 ? 'inline' : 'none'}">
                        <label><input type="checkbox" style="float:none;margin-right:5px;" data-bind="checked: showDiff"><span style="font-size:12px">Show <abbr title="The difference between two adjacent hero tabs shown next to each stat.">delta values</abbr>. <span data-bind="visible: showDiff">Comparing level <span data-bind="text: selectedHeroLevel"></span> <span data-bind="text: hero().displayname"></span> to level <span data-bind="text: heroCompare().selectedHeroLevel"></span> <span data-bind="text: heroCompare().hero().displayname"></span>.</span></span></label>
                        <label style="margin-left:25px;font-size:12px;"><input type="checkbox" style="float:none;margin-right:5px;" data-bind="checked: showUnitTab">Show unit tab</label>
                    </div>
                </h3>

                <div class="col-md-12" data-bind="visible: showStatDetails(), css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}, template: {name: 'stats-additional-template'}"></div>

                <div class="statscontainer" data-bind="foreach: $root.allItems">
                    <div data-bind="template: { name: $data.value + '-template', data: $parentContext.$data}"></div>
                </div>
            </div>

            <div class="row" data-bind="visible: showDamageDetails()">
                <div class="col-md-12">
                    <h3 style="display:block;" class="section_header" data-bind="toggle: showDamageDetails, css: { section_disabled: !showDamageDetails() }">Damage Details
                        <span class="pull-right">
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('physical')}">Physical</small>
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('magic')}">Magical</small>
                            <small style="text-align:center" data-bind="style: {color: getDamageTypeColor('pure')}">Pure</small>
                        </span>
                    </h3>
                    <table class="table">
                        <tbody>
                            <tr>
                                <td></td>
                                <td class="text-right"><strong>Unmitigated</strong></td>
                                <td class="text-right"><strong><abbr data-bind="attr: {title: 'After reductions from ' + enemy().hero().displayname()}">After Reductions</abbr></strong></td>
                            </tr>
                            <tr>
                                <td><abbr title="Sum of damage sources">Damage Per Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().total.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'total'), diffStyle: $root.getDiffMagnitude($data, 'total'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalReduced.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalReduced'), diffStyle: $root.getDiffMagnitude($data, 'totalReduced'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().geminateAttack.active">
                                <td class="indent"><abbr title="Sum of damage sources + geminate attack damage">with Geminate Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalGeminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalGeminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'totalGeminateAttack'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().totalGeminateAttackReduced.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'totalGeminateAttackReduced'), diffStyle: $root.getDiffMagnitude($data, 'totalGeminateAttackReduced'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                                <td class="indent"><abbr title="Sum of damage sources + average crit damage per attack">with Crit:</abbr></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().sumTotal.toFixed(2)"></span></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().sumTotalReduced.toFixed(2)"></span></td>
                            </tr>
                            <tr>
                                <td><abbr title="Damage per attack * attacks per second">DPS:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.base.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.base'), diffStyle: $root.getDiffMagnitude($data, 'dps.base'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.reduced.base.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.reduced.base'), diffStyle: $root.getDiffMagnitude($data, 'dps.reduced.base'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().geminateAttack.active">
                                <td class="indent"><abbr title="(Damage per attack * attacks per second) + average geminate attack dps">with Geminate Attack:</abbr></td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.geminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.geminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'dps.geminateAttack'), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: damageTotalInfo().dps.reduced.geminateAttack.toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffTextWrapper($data, 'dps.reduced.geminateAttack'), diffStyle: $root.getDiffMagnitude($data, 'dps.reduced.geminateAttack'), visible: showDiff"></span>
                                </td>
                            </tr>
                            <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                                <td class="indent"><abbr data-bind="attr: { title: damageTotalInfo().geminateAttack.active ? 'Damage per attack (including crit) * attacks per second + average geminate attack dps' : 'Damage per attack (including crit) * attacks per second' }, text: damageTotalInfo().geminateAttack.active ? 'with Crit and Geminate Attack' : 'with Crit:' "></abbr></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().dps.total.toFixed(2)"></span></td>
                                <td class="text-right"><span data-bind="html: damageTotalInfo().dps.reduced.total.toFixed(2)"></span></td>
                            </tr>
                            <tr><td colspan=3><strong><abbr title="with %chance taken into account">Damage Sources</abbr></strong></td></tr>
                            <tr>
                                <td>Base Damage</td>
                                <td class="text-right">
                                    <span data-bind="html: ((baseDamage()[0] + baseDamage()[1])/2).toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffText(((baseDamage()[0] + baseDamage()[1])/2).toFixed(2) - ((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2).toFixed(2)), diffStyle: (((baseDamage()[0] + baseDamage()[1])/2).toFixed(2) - ((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2).toFixed(2)), visible: showDiff"></span>
                                </td>
                                <td class="text-right">
                                    <span data-bind="html: getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2)"></span>
                                    <span data-bind="html: $root.getDiffText(getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2) - getReducedDamage((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2, 'physical').toFixed(2)), diffStyle: (getReducedDamage((baseDamage()[0] + baseDamage()[1])/2, 'physical').toFixed(2) - getReducedDamage((heroCompare().baseDamage()[0] + heroCompare().baseDamage()[1])/2, 'physical').toFixed(2)), visible: showDiff"></span>
                                </td>
                            </tr>
                        </tbody>
                        <tbody data-bind="foreach: damageTotalInfo().sources">
                            <tr>
                                <td><span data-bind="text: $data.name"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damage.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damageReduced.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                            </tr>
                        </tbody>

                        <tr data-bind="visible: damageTotalInfo().sourcesCrit.length > 0">
                            <td colspan=2><strong>Critical Strike</strong></td>
                        </tr>
                        
                        <tbody data-bind="foreach: damageTotalInfo().sourcesCrit">
                            <tr>
                                <td><span data-bind="text: $data.name"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damage.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                                <td class="text-right"><span data-bind="html: $data.damageReduced.toFixed(2), style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                            </tr>
                        </tbody>
                    
                        <tbody>
                            <tr data-bind="visible: cleaveInfo().length > 0">
                                <td colspan=3><strong>Cleave</strong></td>
                            </tr>
                        </tbody>    
                        <tbody data-bind="foreach: cleaveInfo()">
                            <tr><td>Radius:</td><td class="text-right"><span data-bind="html: $data.radius"></span></td></tr>
                            <tr><td>Magnitude:</td><td class="text-right"><span data-bind="html: ($data.magnitude * 100).toFixed(2) + '%'"></span></td></tr>
                            <tr>
                                <td>Cleave Damage:</td>
                                <td class="text-right"><span data-bind="html: ($data.magnitude * $parent.damageTotalInfo().total).toFixed(2)"></span></td>
                            </tr>
                        </tbody>
                    
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-8" data-bind="css: {'col-md-8': $root.layout() == 0, 'col-md-12': $root.layout() == 1}">
            <div class="row">
                <div class="col-md-12" data-bind="itemBuildTable: $data.buildExplorer">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().inventory, css: { section_disabled: !sectionDisplay().inventory() }">Inventory <small style="color:goldenrod" data-bind="html: inventory.totalCost() ? '<img src=\'http://cdn.dota2.com/apps/dota2/images/tooltips/gold.png\'/> ' + inventory.totalCost() : '' "></small></h3>
                    <div id="inventory" class="inventory hover-cursor" data-bind="click: function (data, event) { buildExplorer.selectInventory(-1); }, css: {'row-highlight': selectedInventory() == -1}, template: { name: 'item-template', foreach: inventory.items }, visible: sectionDisplay().inventory()"></div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().ability, css: { section_disabled: !sectionDisplay().ability() }">Abilities <small style="color:inherit" data-bind="text: availableSkillPoints() ? (availableSkillPoints() == 1 ? '1 unspent skillpoint' : availableSkillPoints() + ' unspent skillpoints') : ''"></small></h3>
                    <div class="row" data-bind="template: { name: 'ability-template', foreach: ability().abilities }, visible: sectionDisplay().ability()"></div>
                    <div class="form-horizontal" data-bind="if: selectedHero().heroName == 'silencer', visible: sectionDisplay().ability()">
                        <div class="form-group">
                                <div class="col-md-2 control-label">
                                    <label for="intelligencestolen">Intelligence Stolen</label>
                                </div>
                                <div class="col-md-2">
                                    <input class="form-control" id="intelligencestolen" data-bind="value: intStolen" />
                                </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().buff, css: { section_disabled: !sectionDisplay().buff() }">Buffs</h3>
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().buff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <select id="buffselect" class="form-control" data-bind="options: buffs.availableBuffs , optionsText: 'buffDisplayName', value: buffs.selectedBuff"></select>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: buffs.addBuff">Add</button>
                                <button class="btn btn-default" data-bind="click: function(data,event) { buffs.removeBuff(data, event, buffs.selectedBuff().buffName) }">Remove</button>
                            </div>
                        </div>
                    </div>
                    <div class="row" data-bind="foreach: buffs.buffs, visible: sectionDisplay().buff()">
                        <div data-bind="css: {row: $data.data.isDetail() || ($index() < $parent.buffs.buffs().length-1 && $parent.buffs.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.buffs.buffs().length-1 && $parent.buffs.buffs()[$index()+1].data.isDetail()) }">
                            <div class="col-md-3 text-center bottom-buffer2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                                <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.data.isActive() || $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name() + '.png'}, click: function(data, event) { $parent.buffs.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.buffs.removeBuff(data, event, $data.data.name()) } }"/>
                                <div class="progress" style="position:relative">
                                    <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)"></div>
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }"></div>
                                </div>
                                <div class="btn-group btn-group-justified" data-bind="if: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.buffs.levelDownAbility($index, data.data, event, $parent); }">-</a>
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.buffs.levelUpAbility($index, data.data, event, $parent); }">+</a>
                                </div>
                                <div class="btn-group btn-group-justified">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.buffs.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}">Details</a>
                                </div>
                            </div>
                            <div class="col-md-9 bottom-buffer" data-bind="visible: $data.data.isDetail()">
                                <button type="button" class="close" data-bind="click: function(data, event) { $parent.buffs.toggleBuffDetail($index, data.data, event); }">&times;</button>
                                <div data-bind="html: $parent.ability().getAbilityTooltipData($data.hero, $data.data.name())"></div>
                                <div data-bind="if: $data.data.name() in $parent.buffs.abilityData && $parent.buffs.buffs()[$index()].data.level() > 0">
                                    <div class="col-md-8">
                                        <div data-bind="template: { name: 'buff-settings-template', data: $parent.buffs.abilitySettingsData($data.data.name(), $parent, $index()) }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().buff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input class="form-control" id="auto2" data-bind="attr: {id: id() + '-auto2' }, jqAuto: { autoFocus: true, html: true }, jqAutoSource: buffs.itemBuffs.itemBuffOptions, jqAutoValue: buffs.itemBuffs.selectedItemBuff, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" data-bind="jqAutoCombo: id() + '-auto2'"><span class="glyphicon glyphicon-search"></span></button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: buffs.itemBuffs.addItemBuff">Add</button>
                            </div>
                        </div>
                    </div>
                    <div data-bind="foreach: buffs.itemBuffs.items, visible: sectionDisplay().buff()">
                        <div class="pull-left" style="margin-right:10px" data-bind="template: { name: 'item-buff-template'}"></div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().debuff, css: { section_disabled: !sectionDisplay().debuff() }">Debuffs</h3>
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().debuff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <select id="buffselect" class="form-control" data-bind="options: debuffs.availableDebuffs , optionsText: 'buffDisplayName', value: debuffs.selectedBuff"></select>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: debuffs.addBuff">Add</button>
                                <button class="btn btn-default" data-bind="click: function(data,event) { debuffs.removeBuff(data, event, debuffs.selectedBuff().buffName) }">Remove</button>
                            </div>
                        </div>
                    </div>

                    <div class="row" data-bind="foreach: debuffs.buffs, visible: sectionDisplay().debuff()">
                        <div data-bind="css: {row: $data.data.isDetail() || ($index() < $parent.debuffs.buffs().length-1 && $parent.debuffs.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.debuffs.buffs().length-1 && $parent.debuffs.buffs()[$index()+1].data.isDetail()) }">
                            <div class="col-md-3 text-center bottom-buffer2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                                <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.data.isActive() || $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name() + '.png'}, click: function(data, event) { $parent.debuffs.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.debuffs.removeBuff(data, event, $data.data.name()) } }"/>
                                <div class="progress" style="position:relative">
                                    <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)"></div>
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }"></div>
                                </div>
                                <div class="btn-group btn-group-justified" data-bind="if: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.debuffs.levelDownAbility($index, data.data, event, $parent); }">-</a>
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.debuffs.levelUpAbility($index, data.data, event, $parent); }">+</a>
                                </div>
                                <div class="btn-group btn-group-justified">
                                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.debuffs.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}">Details</a>
                                </div>
                            </div>
                            <div class="col-md-9 bottom-buffer" data-bind="visible: $data.data.isDetail()">
                                <button type="button" class="close" data-bind="click: function(data, event) { $parent.debuffs.toggleBuffDetail($index, data.data, event); }">&times;</button>
                                <div data-bind="html: $parent.ability().getAbilityTooltipData($data.hero, $data.data.name())"></div>
                                <div data-bind="if: $data.data.name() in $parent.debuffs.abilityData && $parent.debuffs.buffs()[$index()].data.level() > 0">
                                    <div class="col-md-8">
                                        <div data-bind="template: { name: 'buff-settings-template', data: $parent.debuffs.abilitySettingsData($data.data.name(), $parent, $index()) }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-horizontal" data-bind="visible: sectionDisplay().debuff()">
                        <div class="form-group">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input class="form-control" id="auto3" data-bind="attr: {id: id() + '-auto3' }, jqAuto: { autoFocus: true, html: true }, jqAutoSource: debuffs.itemBuffs.itemDebuffOptions, jqAutoValue: debuffs.itemBuffs.selectedItemDebuff, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" data-bind="jqAutoCombo: id() + '-auto3'"><span class="glyphicon glyphicon-search"></span></button>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-default" data-bind="click: debuffs.itemBuffs.addItemDebuff">Add</button>
                            </div>
                        </div>
                    </div>
                    <div data-bind="foreach: debuffs.itemBuffs.items, visible: sectionDisplay().debuff()">
                        <div class="pull-left" style="margin-right:10px" data-bind="template: { name: 'item-debuff-template'}"></div>
                    </div>
                </div>
            </div>

            <div class="row" data-bind="template: { name: 'damage-amp-template'}"></div>

            <div class="row">
                <div class="col-md-12">
                    <h3 class="section_header" data-bind="toggle: sectionDisplay().illusion, css: { section_disabled: !sectionDisplay().illusion() }">Illusions</h3>
                    <div data-bind="visible: sectionDisplay().illusion()">
                        <h4 style="color:red">Under Construction</h4>
                        <div class="form-horizontal">
                            <div class="form-group">
                                    <div class="col-md-2 control-label">
                                        <label for="illusionSelect">Type</label>
                                    </div>
                                    <div class="col-md-10">
                                        <select id="illusionSelect" class="form-control" data-bind="options: availableIllusions , optionsText: 'illusionDisplayName', value: selectedIllusion"></select>
                                    </div>
                            </div>
                            <div class="form-group">
                                    <div class="col-md-2 control-label">
                                        <label for="illusionabilitylevel">Ability Level</label>
                                    </div>
                                    <div class="col-md-10">
                                        <select id="illusionabilitylevel" class="form-control" data-bind="value: illusionAbilityLevel, foreach: new Array(illusionAbilityMaxLevel())">
                                            <option data-bind="text: $index()+1"></option>
                                        </select>
                                    </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <button class="btn btn-default" data-bind="click: addIllusion">Add Illusion</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		
		<div class="col-md-12">
            <!-- ko with: buildExplorer -->
			<h3 class="section_header" data-bind="toggle: $parent.sectionDisplay().skillbuild, css: { section_disabled: !$parent.sectionDisplay().skillbuild() }">Build Explorer</h3>
			<div data-bind="visible: $parent.sectionDisplay().skillbuild()">
				<div class="col-md-12">
					<h4 class="section_header" data-bind="toggle: $parent.sectionDisplay()['skillbuild-skills'], css: { section_disabled: !$parent.sectionDisplay()['skillbuild-skills']() }">Skill Build <small style="color:inherit" data-bind="text: availableSkillBuildPoints() ? (availableSkillBuildPoints() == 1 ? '1 unspent skillpoint' : availableSkillBuildPoints() + ' unspent skillpoints') : ''"></small></h4>
						<div data-bind="visible: $parent.sectionDisplay()['skillbuild-skills']">
						<table>
							<tbody data-bind="template: { name: 'ability-3-template', foreach: $parent.ability().abilities }"></tbody>
						</table>
						<div class="form-group">
							<button class="btn btn-default" data-bind="click: resetSkillBuild">Clear</button>
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<h4 class="section_header" data-bind="toggle: $parent.sectionDisplay()['skillbuild-items'], css: { section_disabled: !$parent.sectionDisplay()['skillbuild-items']() }">Item Build</h4>
					<div data-bind="visible: $parent.sectionDisplay()['skillbuild-items']">
						<table class="table">
							<thead>
								<tr>
									<th>Level</th>
									<th class="text-center">Inventory</th>
									<th></th>
									<th></th>
									<th></th>
								</tr>
							</thead>
							<tbody data-bind="foreach: new Array(25), itemBuildTable: $data">
								<tr class="hover-cursor" data-bind="css: {'row-highlight': $parents[1].selectedInventory() == $index()}">
									<td class="carry-over" data-bind="click: function (data, event) { $parent.selectInventory($index()); }">
										<strong data-bind="text: ($index() + 1)"></strong>
										<a class="btn btn-default btn-xs glyphicon" data-bind="visible: $index() > 0, toggle: $parent.itemBuild()[$index()].carryOver, preventBubble: 'click', css: { 'glyphicon-arrow-down': $parent.itemBuild()[$index()].carryOver(), 'glyphicon-stop': !$parent.itemBuild()[$index()].carryOver() }" title="Carry over items to next level's inventory"></a>
									</td>
									<td class="col-md-10" data-bind="click: function (data, event) { $parent.selectInventory($index()); }, with: $parent.itemBuild()[$index()]">
										<div class="itemBuild-inventory" data-bind="template: { name: 'itemBuild-item-template', foreach: items }"></div>
									</td>
									<td>
										<a class="btn btn-default btn-xs" data-bind="click: function (data, event) { $parent.copyInventoryToClipBoard($index()); }" title="Copy items">Copy</a>
									</td>
									<td>
										<a class="btn btn-default btn-xs" data-bind="click: function (data, event) { $parent.pasteInventoryFromClipBoard($index()); }" title="Paste items">Paste</a>
									</td>
									<td>
										<a class="btn btn-default btn-xs" data-bind="click: function (data, event) { $parent.resetItemBuild($index()); }" title="Clear inventory">Clear</a>
									</td>
								</tr>
							</tbody>
						</table>
						<div class="form-group">
							<button class="btn btn-default" data-bind="click: resetAllItemBuilds">Clear</button>
						</div>
					</div>
				</div>
                <div class="form-group">
					<label>Data set header label</label>
                    <input type="text" class="form-control" data-bind="value: graphDataHeader">
                </div>
                <div class="form-group">
					<label>Data set description</label>
                    <input type="text" class="form-control" data-bind="value: graphDataDescription">
                </div>
                <div class="form-group">
                    <button class="btn btn-default" data-bind="click: graph">Add data set</button>
                </div>
                <div class="form-group">
                    <label>Hero Property</label>
                    <select class="form-control" data-bind="options: graphProperties, optionsText: 'label', optionsValue: 'id', value: selectedGraphProperty"></select>
                </div>
				<!-- ko if: graphData().length > 0 -->
				<div class="form-group" data-bind="chart: graphChartData, chartType: 'Scatter', chartOptions: graphChartOptions(), chartContext: graphChartContext"></div>
        <div class="form-group">
          <button class="btn btn-default" data-bind="click: exportImage"><span class="glyphicon glyphicon-export"></span> Export Image</button>
        </div>
                <button class="btn btn-default btn-xs" data-bind="toggle: showGraphItemBuildRows, css: {'toggled': showGraphItemBuildRows}">Show item build rows</button>
                <button class="btn btn-default btn-xs" data-bind="toggle: showGraphSkillBuildColumns, css: {'toggled': showGraphSkillBuildColumns}">Show skill build columns</button>
				<table class="table build-table">
					<thead>
						<tr>
							<th class="right-border">Level</th>
							<!-- ko foreach: graphData -->
							<th class="text-center" data-bind="css: { 'right-border': !$parent.showGraphSkillBuildColumns() || !$data.visible() }">
								<span data-bind="css: { 'tooltip-underline': $data.description }, tooltip: {title: $data.description, placement: 'bottom'}, visible: $data.visible(), text: $data.header, style: { color: $parent.graphDistinctColor($parent.graphData().length, $index(), 1) }"></span>
                                <span class="btn btn-xs glyphicon glyphicon-info-sign" data-bind="visible: $data.visible(), popover: {template: 'popover-graphData-template', data: $data, options: {} }"></span>
								<button class="btn btn-default btn-xs shop-button glyphicon glyphicon-remove pull-right" class="close" data-bind="visible: !$parent.showGraphSkillBuildColumns() || !$data.visible(), click: function(data, event) { $parent.removeGraphDataSet($data); }"></button>
								<button class="btn btn-default btn-xs shop-button glyphicon pull-right" data-bind="visible: !$parent.showGraphSkillBuildColumns() || !$data.visible(), toggle: $data.visible, css: { 'glyphicon-minus': $data.visible(), 'glyphicon-plus': !$data.visible()}"></button>
							</th>
							<th class="text-left right-border" data-bind="visible: $data.visible() && $parent.showGraphSkillBuildColumns()"><abbr title="Q-W-E-R-Stats">Skill Build</abbr>
								<button class="btn btn-default btn-xs shop-button glyphicon glyphicon-remove pull-right" class="close" data-bind="visible: $parent.showGraphSkillBuildColumns(), click: function(data, event) { $parent.removeGraphDataSet($data); }"></button>
								<button class="btn btn-default btn-xs shop-button glyphicon pull-right" data-bind="visible: $parent.showGraphSkillBuildColumns(), toggle: $data.visible, css: { 'glyphicon-minus': $data.visible(), 'glyphicon-plus': !$data.visible()}"></button>
							</th>
							<!-- /ko -->
						</tr>
					</thead>
					<tbody data-bind="foreach: new Array(graphData()[0].data.length)">
						<tr>
							<td class="right-border">
                                <strong data-bind="text: ($index() + 1)"></strong>
                            </td>
							<!-- ko foreach: new Array($parent.graphData().length) -->
							<td class="text-right" data-bind="css: { 'right-border': !$parents[1].showGraphSkillBuildColumns() || !$parents[1].graphData()[$index()].visible() }">
								<span data-bind="visible: $parents[1].graphData()[$index()].visible(), text: $parents[1].graphData()[$index()].data[$parentContext.$index()][$parents[1].selectedGraphProperty()]"></span>
							</td>
							<td class="text-left right-border" data-bind="visible: $parents[1].graphData()[$index()].visible() && $parents[1].showGraphSkillBuildColumns(), text: $parents[1].graphData()[$index()].cumulativeSkillBuild[$parentContext.$index()].join('-')"></td>
							<!-- /ko -->
						</tr>
                        <tr class="itemBuild-inventory" data-bind="visible: $parent.showGraphItemBuildRows() && $parent.graphRowHasItems($index())">
                            <td class="right-border-itemrow no-top-border"></td>
							<!-- ko foreach: new Array($parent.graphData().length) -->
                            <td class="right-border-itemrow no-top-border" data-bind="attr: { colspan: $parents[1].graphData()[$index()].visible() && $parents[1].showGraphSkillBuildColumns() ? 2 : 1 }">
								<div data-bind="visible: $parents[1].graphData()[$index()].visible(), foreach: $parents[1].graphData()[$index()].data[$parentContext.$index()].items">
									<img class="itemBuild-img-sm img-rounded" data-bind="css: { item_disabled: !enabled, item_active: $parents[3].inventory.getActiveBorder($data) == 1, item_inactive: $parents[3].inventory.getActiveBorder($data) == 0 }, attr:{ src: $parents[3].inventory.getItemImage($data) }"/>
									<div style="float:left" data-bind="visible: $parents[3].inventory.getItemSizeLabel($data) != ''">
										<div data-bind="html: $parents[3].inventory.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;opacity:.5;background-color:black;padding:0px 2px"></div>
										<div data-bind="html: $parents[3].inventory.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;padding:0px 2px"></div>
									</div>
								</div>
                            </td>
							<!-- /ko -->
                        </tr>
					</tbody>
				</table>
				<!-- /ko -->
			</div>
            <!-- /ko -->
		</div>
    </div>
</script>

<script type="text/html" id="popover-graphData-template">
	<label>Skill Build</label>
    <div data-bind="foreach: $data.skillBuild">
        <div class="pull-left" style="width:50px;height:50px;position:relative;border:1px solid black;">
            <div style="position:absolute;bottom:0;right:0;background-color:white;color:black;opacity:.8" data-bind="text: $index() + 1"></div>
            <!-- ko if: $data != -1 -->
            <img class="img-rounded" data-bind="attr:{src: '/media/images/spellicons/' + $parents[3].ability().abilities()[$data].name() + '.png'}"/>
            <!-- /ko -->
            <!-- ko if: $data == -1 -->
            
            <!-- /ko -->
        </div>
    </div>
</script>

<script type="text/html" id="shop-column-template">
  <div class="shop-column">
    <div class="hc-shop hc-shop-secret" id="secret"></div>
    <div class="img-rounded hc-item hc-item-energy_booster" id="energy_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-vitality_booster" id="vitality_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-point_booster" id="point_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-platemail" id="platemail" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-talisman_of_evasion" id="talisman_of_evasion" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-hyperstone" id="hyperstone" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-ultimate_orb" id="ultimate_orb" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-demon_edge" id="demon_edge" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-mystic_staff" id="mystic_staff" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-eagle" id="eagle" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-reaver" id="reaver" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
    <div class="img-rounded hc-item hc-item-relic" id="relic" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  </div>
</script>

<script type="text/html" id="shop-template">
        <div id="shop-container" class="col-md-12 col-lg-4" data-bind="shopDockStyle: shopDockTrigger, visible: displayShop() || shopPopout(), css: {'col-lg-4': !shopPopout()}, style: { 'padding-top': shopPopout() ? '5px' : '0px'}">
              <button id="shop-minimize" class="btn btn-default btn-xs shop-button glyphicon glyphicon-minus pull-right" data-bind="toggle: displayShop, visible: displayShop()" title="Minimize shop"></button>
              <button id="shop-maximize" class="btn btn-default btn-xs shop-button glyphicon glyphicon-plus pull-right" data-bind="toggle: displayShop, visible: !displayShop()" title="Maximize shop"></button>
              <button class="btn btn-default btn-xs shop-button glyphicon glyphicon-new-window pull-right hidden-xs" data-bind="click: shopPopout, visible: !shopPopout()" title="Popout shop"></button>
              <button class="btn btn-default btn-xs shop-button glyphicon glyphicon-align-right pull-right hidden-xs" data-bind="toggle: shopDock, attr: { title: shopDock() ? 'Undock shop to right side of screen' : 'Dock shop to right side of screen' }" ></button>
            <ul id="shoptabs" class="nav nav-tabs" data-bind="visible: displayShop()">
              <li><a href="#shop_basic" data-toggle="tab">Basic</a></li>
              <li><a href="#shop_upgrade" data-toggle="tab">Upgrade</a></li>
              <li><a href="#shop_secret" data-toggle="tab">Secret</a></li>
            </ul>
            <div class="tab-content text-center bottom-buffer2" data-bind="visible: displayShop()">
                <div class="tab-pane active" id="shop_basic">
<div class="shop-column">
  <div class="hc-shop hc-shop-consumables" id="consumables"></div>
  <div class="img-rounded hc-item hc-item-clarity" id="clarity" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-faerie_fire" id="faerie_fire" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-enchanted_mango" id="enchanted_mango" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-tango" id="tango" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-flask" id="flask" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-smoke_of_deceit" id="smoke_of_deceit" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-tpscroll" id="tpscroll" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-dust" id="dust" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-courier" id="courier" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-flying_courier" id="flying_courier" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ward_observer" id="ward_observer" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ward_sentry" id="ward_sentry" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-bottle" id="bottle" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-attributes" id="attributes"></div>
  <div class="img-rounded hc-item hc-item-branches" id="branches" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-gauntlets" id="gauntlets" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-slippers" id="slippers" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-mantle" id="mantle" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-circlet" id="circlet" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-belt_of_strength" id="belt_of_strength" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-boots_of_elves" id="boots_of_elves" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-robe" id="robe" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ogre_axe" id="ogre_axe" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-blade_of_alacrity" id="blade_of_alacrity" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-staff_of_wizardry" id="staff_of_wizardry" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-armaments" id="armaments"></div>
  <div class="img-rounded hc-item hc-item-ring_of_protection" id="ring_of_protection" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-stout_shield" id="stout_shield" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-quelling_blade" id="quelling_blade" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-orb_of_venom" id="orb_of_venom" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-blades_of_attack" id="blades_of_attack" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-chainmail" id="chainmail" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-quarterstaff" id="quarterstaff" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-helm_of_iron_will" id="helm_of_iron_will" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-broadsword" id="broadsword" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-claymore" id="claymore" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-javelin" id="javelin" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-mithril_hammer" id="mithril_hammer" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-arcane" id="arcane"></div>
  <div class="img-rounded hc-item hc-item-magic_stick" id="magic_stick" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-sobi_mask" id="sobi_mask" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ring_of_regen" id="ring_of_regen" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-boots" id="boots" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-gloves" id="gloves" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-cloak" id="cloak" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ring_of_health" id="ring_of_health" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-void_stone" id="void_stone" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-gem" id="gem" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-lifesteal" id="lifesteal" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-shadow_amulet" id="shadow_amulet" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ghost" id="ghost" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-blink" id="blink" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
</div>
                </div>
                <div class="tab-pane" id="shop_upgrade">
<div class="shop-column">
  <div class="hc-shop hc-shop-common" id="common"></div>
  <div class="img-rounded hc-item hc-item-magic_wand" id="magic_wand" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-null_talisman" id="null_talisman" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-wraith_band" id="wraith_band" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-poor_mans_shield" id="poor_mans_shield" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-bracer" id="bracer" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-soul_ring" id="soul_ring" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-phase_boots" id="phase_boots" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-power_treads" id="power_treads" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-oblivion_staff" id="oblivion_staff" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-pers" id="pers" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-hand_of_midas" id="hand_of_midas" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-travel_boots" id="travel_boots" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-moon_shard" id="moon_shard" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-support" id="support"></div>
  <div class="img-rounded hc-item hc-item-ring_of_basilius" id="ring_of_basilius" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-iron_talon" id="iron_talon" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-headdress" id="headdress" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-buckler" id="buckler" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-urn_of_shadows" id="urn_of_shadows" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-tranquil_boots" id="tranquil_boots" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ring_of_aquila" id="ring_of_aquila" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-medallion_of_courage" id="medallion_of_courage" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-arcane_boots" id="arcane_boots" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ancient_janggo" id="ancient_janggo" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-mekansm" id="mekansm" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-vladmir" id="vladmir" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-pipe" id="pipe" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-guardian_greaves" id="guardian_greaves" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-caster" id="caster"></div>
  <div class="img-rounded hc-item hc-item-glimmer_cape" id="glimmer_cape" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-force_staff" id="force_staff" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-veil_of_discord" id="veil_of_discord" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-aether_lens" id="aether_lens" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-necronomicon" id="necronomicon" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-dagon" id="dagon" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-cyclone" id="cyclone" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-solar_crest" id="solar_crest" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-rod_of_atos" id="rod_of_atos" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-orchid" id="orchid" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ultimate_scepter" id="ultimate_scepter" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-refresher" id="refresher" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-sheepstick" id="sheepstick" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-octarine_core" id="octarine_core" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-weapons" id="weapons"></div>
  <div class="img-rounded hc-item hc-item-lesser_crit" id="lesser_crit" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-armlet" id="armlet" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-invis_sword" id="invis_sword" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-basher" id="basher" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-bfury" id="bfury" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-ethereal_blade" id="ethereal_blade" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-silver_edge" id="silver_edge" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-radiance" id="radiance" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-monkey_king_bar" id="monkey_king_bar" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-greater_crit" id="greater_crit" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-butterfly" id="butterfly" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-rapier" id="rapier" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-abyssal_blade" id="abyssal_blade" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-armor" id="armor"></div>
  <div class="img-rounded hc-item hc-item-hood_of_defiance" id="hood_of_defiance" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-vanguard" id="vanguard" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-blade_mail" id="blade_mail" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-soul_booster" id="soul_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-crimson_guard" id="crimson_guard" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-black_king_bar" id="black_king_bar" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-lotus_orb" id="lotus_orb" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-shivas_guard" id="shivas_guard" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-bloodstone" id="bloodstone" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-manta" id="manta" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-sphere" id="sphere" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-assault" id="assault" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-heart" id="heart" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
</div>
<div class="shop-column">
  <div class="hc-shop hc-shop-artifacts" id="artifacts"></div>
  <div class="img-rounded hc-item hc-item-mask_of_madness" id="mask_of_madness" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-helm_of_the_dominator" id="helm_of_the_dominator" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-dragon_lance" id="dragon_lance" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-sange" id="sange" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-yasha" id="yasha" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-maelstrom" id="maelstrom" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-diffusal_blade" id="diffusal_blade" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-desolator" id="desolator" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-heavens_halberd" id="heavens_halberd" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-sange_and_yasha" id="sange_and_yasha" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-skadi" id="skadi" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-mjollnir" id="mjollnir" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-satanic" id="satanic" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
  <div class="img-rounded hc-item hc-item-emptyitembg" id="emptyitembg"></div>
</div>
                </div>
                <div class="tab-pane" id="shop_secret">
                  <div class="shop-tab clearfix">
                    <div class="shop-column">
                      <div class="hc-shop hc-shop-secret" id="secret"></div>
                      <div class="img-rounded hc-item hc-item-energy_booster" id="energy_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-vitality_booster" id="vitality_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-point_booster" id="point_booster" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-platemail" id="platemail" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-talisman_of_evasion" id="talisman_of_evasion" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-hyperstone" id="hyperstone" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-ultimate_orb" id="ultimate_orb" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-demon_edge" id="demon_edge" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-mystic_staff" id="mystic_staff" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-eagle" id="eagle" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-reaver" id="reaver" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                      <div class="img-rounded hc-item hc-item-relic" id="relic" data-bind="click: changeSelectedItem, event: { dblclick: selectedTab().data.buildExplorer.getSelectedInventory().addItem }"></div>
                    </div>
                  </div>
                </div>
            </div>

            <div class="form-group" data-bind="visible: displayShop()">
                <div class="input-group">
                    <input class="form-control" id="auto" data-bind="jqAuto: { autoFocus: true, html: true }, jqAutoSource: selectedTab().data.inventory.itemOptions, jqAutoValue: selectedItem, jqAutoSourceLabel: 'displayname', jqAutoSourceInputValue: 'name', jqAutoSourceValue: 'value'" />
                    <span class="input-group-btn">
                        <button class="btn btn-default" data-bind="jqAutoCombo: 'auto'"><span class="glyphicon glyphicon-search"></span></button>
                    </span>
                </div>
            </div>

            <div data-bind="visible: selectedItem() && displayShop()">
				<button class="btn btn-default btn-xs glyphicon glyphicon-minus pull-right" data-bind="toggle: displayShopItemTooltip, visible: displayShopItemTooltip()" title="Hide item description"></button>
				<button class="btn btn-default btn-xs glyphicon glyphicon-plus pull-right" data-bind="toggle: displayShopItemTooltip, visible: !displayShopItemTooltip()" title="Show item description"></button>
                <div data-bind="html: getItemTooltipData, css: { 'hide-shop-item-details': !displayShopItemTooltip() }"></div>
                <div style="margin-top:10px;margin-bottom:10px;" class="form-inline" data-bind="visible: getItemInputLabel() != ''">
                    <div class="form-group">
                        <label for="iteminput" data-bind="text: getItemInputLabel"></label>
                        <input class="form-control" id="iteminput" data-bind="value: itemInputValue" />
                    </div>
                </div>
                <div class="form-group text-right">
                    <button class="btn btn-default" data-bind="click: selectedTab().data.buildExplorer.getSelectedInventory().addItem">Add Item</button>
                </div>
            </div>
        </div>
</script>

<script type="text/html" id="item-template">
    <div class="pull-left" style="margin-right:10px">
        <div class="btn-group">
            <img class="img-rounded" data-bind="css: { item_disabled: !enabled(), item_active: $parent.inventory.getActiveBorder($data) == 1, item_inactive: $parent.inventory.getActiveBorder($data) == 0 }, attr:{ src: $parent.inventory.getItemImage($data) }, click: function(data, event) { $parent.inventory.toggleItem($index, data, event); }, event: { dblclick: $parent.inventory.removeItem }"/>
            <div style="float:left" data-bind="visible: $parent.inventory.getItemSizeLabel($data) != ''">
                <div data-bind="html: $parent.inventory.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;opacity:.5;background-color:black;padding:0px 2px"></div>
                <div data-bind="html: $parent.inventory.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;padding:0px 2px"></div>
            </div>
            <div class="btn-group-vertical">
                <button class="btn btn-default btn-xs" title="Remove Item" data-bind="click: $parent.inventory.removeItem">&times;</button>
                <button class="btn btn-default btn-xs" title="Disable/Enable Item" data-bind="click: $parent.inventory.toggleMuteItem, html: enabled() ? 'o' : '-', attr: {title: enabled() ? 'Disable Item' : 'Enable Item'}">o</button>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="itemBuild-item-template">
    <div class="pull-left" style="margin-right:10px">
        <div class="btn-group">
            <img class="img-rounded" data-bind="css: { item_disabled: !enabled(), item_active: $parent.getActiveBorder($data) == 1, item_inactive: $parent.getActiveBorder($data) == 0 }, attr:{ src: $parent.getItemImage($data) }, click: function(data, event) { $parent.toggleItem($index, data, event); }, event: { dblclick: $parent.removeItem }, clickBubble: false"/>
            <div style="float:left" data-bind="visible: $parent.getItemSizeLabel($data) != ''">
                <div data-bind="html: $parent.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;opacity:.5;background-color:black;padding:0px 2px"></div>
                <div data-bind="html: $parent.getItemSizeLabel($data)" style="position:absolute;left:0;bottom:0;color:white;padding:0px 2px"></div>
            </div>
            <div class="btn-group-vertical">
                <button class="btn btn-default btn-xs" title="Remove Item" data-bind="click: $parent.removeItem, clickBubble: false">&times;</button>
                <button class="btn btn-default btn-xs" title="Disable/Enable Item" data-bind="click: $parent.toggleMuteItem, html: enabled() ? 'o' : '-', attr: {title: enabled() ? 'Disable Item' : 'Enable Item'}, clickBubble: false">o</button>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="item-buff-template">
    <div class="btn-group">
        <img style="width:75px;" class="img-rounded" data-bind="css: { item_disabled: !enabled(), item_active: $parent.buffs.itemBuffs.getActiveBorder($data) == 1, item_inactive: $parent.buffs.itemBuffs.getActiveBorder($data) == 0 }, attr:{ src: $parent.buffs.itemBuffs.getItemImage($data) }, click: function(data, event) { $parent.buffs.itemBuffs.toggleItem($index, data, event); }, event: { dblclick: $parent.buffs.itemBuffs.removeItem }"/>
        <div class="btn-group-vertical">
            <button style="padding:3px 10px;" class="btn btn-default btn-xs" title="Remove Item" data-bind="click: $parent.buffs.itemBuffs.removeItem">&times;</button>
            <button style="padding:3px 10px;" class="btn btn-default btn-xs" title="Disable/Enable Item" data-bind="click: $parent.buffs.itemBuffs.toggleMuteItem, html: enabled() ? 'o' : '-', attr: {title: enabled() ? 'Disable Item' : 'Enable Item'}">o</button>
        </div>
    </div>
</script>

<script type="text/html" id="item-debuff-template">
    <div class="btn-group">
        <img style="width:75px;" class="img-rounded" data-bind="css: { item_disabled: !enabled(), item_active: $parent.debuffs.itemBuffs.getActiveBorder($data) == 1, item_inactive: $parent.debuffs.itemBuffs.getActiveBorder($data) == 0 }, attr:{ src: $parent.debuffs.itemBuffs.getItemImage($data) }, click: function(data, event) { $parent.debuffs.itemBuffs.toggleItem($index, data, event); }, event: { dblclick: $parent.debuffs.itemBuffs.removeItem }"/>
        <div class="btn-group-vertical">
            <button style="padding:3px 10px;" class="btn btn-default btn-xs" title="Remove Item" data-bind="click: $parent.debuffs.itemBuffs.removeItem">&times;</button>
            <button style="padding:3px 10px;" class="btn btn-default btn-xs" title="Disable/Enable Item" data-bind="click: $parent.debuffs.itemBuffs.toggleMuteItem, html: enabled() ? 'o' : '-', attr: {title: enabled() ? 'Disable Item' : 'Enable Item'}">o</button>
        </div>
    </div>
</script>

<script type="text/html" id="damage-amp-template">
    <div class="col-md-12">
        <h3 class="section_header" data-bind="toggle: sectionDisplay().damageamp, css: { section_disabled: !sectionDisplay().damageamp() }">Damage Amplification & Reduction</h3>
        <div data-bind="visible: sectionDisplay().damageamp()">
            <div class="form-horizontal">
                <div class="form-group">
                        <div class="col-md-3 control-label">
                            <label for="damageinput">Damage</label>
                        </div>
                        <div class="col-md-6">
                            <input class="form-control" id="damageinput" data-bind="value: damageInputValue" />
                        </div>
                </div>
            </div>
            <div class="form-horizontal">
                <div class="form-group">
                        <div class="col-md-3 control-label">
                            <label for="buffampselect">Amplification</label>
                        </div>
                        <div class="col-md-5">
                            <select id="buffampselect" class="form-control" data-bind="options: damageAmplification.availableBuffs , optionsText: 'buffDisplayName', value: damageAmplification.selectedBuff"></select>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-default" data-bind="click: damageAmplification.addBuff">Add</button>
                            <button class="btn btn-default" data-bind="click: function(data,event) { damageAmplification.removeBuff(data, event, damageAmplification.selectedBuff().buffName) }">Remove</button>
                        </div>
                </div>
            </div>
            <div class="row" data-bind="foreach: damageAmplification.buffs">
                <div data-bind="css: {row: $data.data.isDetail() || ($index() < $parent.damageAmplification.buffs().length-1 && $parent.damageAmplification.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.damageAmplification.buffs().length-1 && $parent.damageAmplification.buffs()[$index()+1].data.isDetail()) }">
                    <div class="col-md-3 text-center bottom-buffer row2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                        <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.data.isActive() || $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name() + '.png'}, click: function(data, event) { $parent.damageAmplification.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.damageAmplification.removeBuff(data, event, $data.data.name()) } }"/>
                        <div class="progress" style="position:relative">
                            <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)"></div>
                            <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }"></div>
                        </div>
                        <div class="btn-group btn-group-justified" data-bind="if: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.damageAmplification.levelDownAbility($index, data.data, event, $parent); }">-</a>
                            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.damageAmplification.levelUpAbility($index, data.data, event, $parent); }">+</a>
                        </div>
                        <div class="btn-group btn-group-justified">
                            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.damageAmplification.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}">Details</a>
                        </div>
                    </div>
                    <div class="col-md-9 bottom-buffer" data-bind="visible: $data.data.isDetail()">
                        <button type="button" class="close" data-bind="click: function(data, event) { $parent.damageAmplification.toggleBuffDetail($index, data.data, event); }">&times;</button>
                        <div data-bind="html: $parent.ability().getAbilityTooltipData($data.hero, $data.data.name())"></div>
                        <div data-bind="if: $data.data.name() in $parent.damageAmplification.abilityData && $parent.damageAmplification.buffs()[$index()].data.level() > 0">
                            <div class="col-md-8">
                                <div data-bind="template: { name: 'buff-settings-template', data: $parent.damageAmplification.abilitySettingsData($data.data.name(), $parent, $index()) }"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-horizontal">
                <div class="form-group">
                        <div class="col-md-3 control-label">
                            <label for="buffreductionselect">Reduction</label>
                        </div>
                        <div class="col-md-5">
                            <select id="buffreductionselect" class="form-control" data-bind="options: damageReduction.availableDebuffs , optionsText: 'buffDisplayName', value: damageReduction.selectedBuff"></select>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-default" data-bind="click: damageReduction.addBuff">Add</button>
                            <button class="btn btn-default" data-bind="click: function(data,event) { damageReduction.removeBuff(data, event, damageReduction.selectedBuff().buffName) }">Remove</button>
                        </div>
                </div>
            </div>
            <div class="row" data-bind="foreach: damageReduction.buffs">
                <div data-bind="css: {row: $data.data.isDetail() || ($index() < $parent.damageReduction.buffs().length-1 && $parent.damageReduction.buffs()[$index()+1].data.isDetail()), row2: $data.data.isDetail() || ($index() < $parent.damageReduction.buffs().length-1 && $parent.damageReduction.buffs()[$index()+1].data.isDetail()) }">
                    <div class="col-md-3 text-center bottom-buffer row2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                        <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.data.isActive() || $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.data.isActive() && $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.data.name() + '.png'}, click: function(data, event) { $parent.damageReduction.toggleBuff($index, data.data, event); }, event: { dblclick: function(data,event) { $parent.damageReduction.removeBuff(data, event, $data.data.name()) } }"/>
                        <div class="progress" style="position:relative">
                            <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data.data) > 0, text: $data.data.level() + '/' + $parent.getAbilityLevelMax($data.data)"></div>
                            <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data.data) > 0 ? $data.data.level()/$parent.getAbilityLevelMax($data.data)*100 : 0) + '%' }"></div>
                        </div>
                        <div class="btn-group btn-group-justified" data-bind="if: $data.data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.damageReduction.levelDownAbility($index, data.data, event, $parent); }">-</a>
                            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.damageReduction.levelUpAbility($index, data.data, event, $parent); }">+</a>
                        </div>
                        <div class="btn-group btn-group-justified">
                            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.damageReduction.toggleBuffDetail($index, data, event); }, css: {'toggled': $data.data.isDetail}">Details</a>
                        </div>
                    </div>
                    <div class="col-md-9 bottom-buffer" data-bind="visible: $data.data.isDetail()">
                        <button type="button" class="close" data-bind="click: function(data, event) { $parent.damageReduction.toggleBuffDetail($index, data.data, event); }">&times;</button>
                        <div data-bind="html: $parent.ability().getAbilityTooltipData($data.hero, $data.data.name())"></div>
                        <div data-bind="if: $data.data.name() in $parent.damageReduction.abilityData && $parent.damageReduction.buffs()[$index()].data.level() > 0">
                            <div class="col-md-8">
                                <div data-bind="template: { name: 'buff-settings-template', data: $parent.damageReduction.abilitySettingsData($data.data.name(), $parent, $index()) }"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h4>Calculations <a class="btn btn-default btn-xs" data-bind="toggle: showDamageAmpCalcDetails, text: !showDamageAmpCalcDetails() ? 'Show details' : 'Hide details'"></a></h4>
            <table class="table">
                <tbody>
                    <!-- ko foreach: damageInputModified().data -->
                    <tr data-bind="visible: $parent.showDamageAmpCalcDetails()">
                        <td><span style="text-decoration: underline;" data-bind="text: $data.label + ' damage'"></span></td>
                        <td class="text-right"><span data-bind="html: Math.round($data.value * 100) / 100, style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                    </tr>
                        <!-- ko foreach: $data.data -->
                        <tr data-bind="visible: $parents[1].showDamageAmpCalcDetails()">
                            <td><span data-bind="text: $data.label"></span></td>
                            <td class="text-right"><span data-bind="html: Math.round($data.value * 100) / 100, diffStyle: $data.value"></span></td>
                        </tr>
                        <!-- /ko -->
                    <tr data-bind="css: {subtotal: $parent.showDamageAmpCalcDetails()}">
                        <td data-bind="visible: $parent.showDamageAmpCalcDetails()"><span data-bind="text: $data.label + ' damage subtotal'"></span></td>
                        <td data-bind="visible: !$parent.showDamageAmpCalcDetails()"><span data-bind="text: $data.label + ' damage'"></span></td>
                        <td class="text-right"><span data-bind="html: Math.round($data.total * 100) / 100, style: {color: $parent.getDamageTypeColor($data.damageType)}"></span></td>
                    </tr>
                    <!-- /ko -->
                    <tr>
                        <td><strong data-bind="text: damageInputModified().label + ' damage'"></strong></td>
                        <td class="text-right"><strong data-bind="html: Math.round(damageInputModified().total * 100) / 100, style: {color: getDamageTypeColor(damageInputModified().damageType)}"></strong></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/html" id="ability-template">
    <div>
        <div data-bind="if: $data.displayname() != 'Empty' &&  ($data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN') == -1 || $data.name().indexOf('invoker_') != -1),
        style: {clear: $data.name() == 'invoker_cold_snap' || $data.name() == 'invoker_chaos_meteor' ? 'both' : ''},
        css: {row: $data.isDetail() || ($index() < $parent.ability().abilities().length-1 && $parent.ability().abilities()[$index()+1].isDetail()), row3: $data.isDetail() || ($index() < $parent.ability().abilities().length-1 && $parent.ability().abilities()[$index()+1].isDetail()) }">
            <div class="col-md-3 text-center bottom-buffer row2" data-bind="css: {'col-md-3': $root.layout() == 0, 'col-md-2': $root.layout() == 1}">
                <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.isActive() || $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.isActive() && $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.name() + '.png'}, click: function(data, event) { $parent.ability().toggleAbility($index, data, event); }"/>
                <div class="progress" style="position:relative">
                    <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data) > 0, text: $data.level() + '/' + $parent.getAbilityLevelMax($data)"></div>
                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data) > 0 ? $data.level()/$parent.getAbilityLevelMax($data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data) > 0 ? $data.level()/$parent.getAbilityLevelMax($data)*100 : 0) + '%' }"></div>
                </div>
                <div class="btn-group btn-group-justified" data-bind="if: $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.ability().levelDownAbility($index, data, event, $parent); }">-</a>
                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.ability().levelUpAbility($index, data, event, $parent); }">+</a>
                </div>
                <div class="btn-group btn-group-justified">
                    <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.ability().toggleAbilityDetail($index, data, event); }, css: {'toggled': $data.isDetail}">Details</a>
                </div>
                <div class="btn-group btn-group-justified" data-bind="if: $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') != -1">
                    <a class="btn btn-default btn-sm btn-block" style="visibility:hidden;">&mdash;</a>
                </div>
            </div>
            <div class="col-md-9 bottom-buffer2" data-bind="visible: $data.isDetail()">
                <button type="button" class="close" data-bind="click: function(data, event) { $parent.ability().toggleAbilityDetail($index, data, event); }">&times;</button>
                <div data-bind="html: $parent.ability().getAbilityTooltipData($parent.hero().name(), $data.name())"></div>
                <div data-bind="if: $data.name() in $parent.ability().abilityData && $parent.ability().abilities()[$index()].level() > 0">
                    <div class="col-md-12" style="margin-top: 10px" >
                        <div data-bind="template: { name: 'ability-settings-template', data: $parent.ability().abilitySettingsData($data.name(), $parent, $index()) }"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="ability-2-template">
    <div data-bind="if: $data.displayname() != 'Empty' &&  ($data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN') == -1 || $data.name().indexOf('invoker_') != -1),
        style: {clear: $data.name() == 'invoker_cold_snap' || $data.name() == 'invoker_chaos_meteor' ? 'both' : ''}, css: {row: $data.isDetail() || ($index() < $parent.ability().abilities().length-1 && $parent.ability().abilities()[$index()+1].isDetail()), row3: $data.isDetail() || ($index() < $parent.ability().abilities().length-1 && $parent.ability().abilities()[$index()+1].isDetail()) }">
        <div class="col-md-2 text-center bottom-buffer row2">
            <img style="padding:0px;margin-bottom:1px;" class="img-rounded ability" data-bind="css: { ability_active: $data.isActive() || $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') != -1, ability_inactive: !$data.isActive() && $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, btn: $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1, 'btn-default': $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_PASSIVE') == -1}, attr:{src: '/media/images/spellicons/' + $data.name() + '.png'}, click: function(data, event) { $parent.ability().toggleAbility($index, data, event); }"/>
            <div class="progress" style="position:relative">
                <div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parent.getAbilityLevelMax($data) > 0, text: $data.level() + '/' + $parent.getAbilityLevelMax($data)"></div>
                <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parent.getAbilityLevelMax($data) > 0 ? $data.level()/$parent.getAbilityLevelMax($data)*100 : 0) }, style: { width: ($parent.getAbilityLevelMax($data) > 0 ? $data.level()/$parent.getAbilityLevelMax($data)*100 : 0) + '%' }"></div>
            </div>
            <div class="btn-group btn-group-justified" data-bind="if: $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1">
                <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.ability().levelDownAbility($index, data, event, $parent); }">-</a>
                <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.ability().levelUpAbility($index, data, event, $parent); }">+</a>
            </div>
            <div class="btn-group btn-group-justified">
            <a class="btn btn-default btn-sm" data-bind="click: function(data, event) { $parent.ability().toggleAbilityDetail($index, data, event); }, css: {'toggled': $data.isDetail}">Details</a>
            </div>
        </div>
        <div class="col-md-10 bottom-buffer" data-bind="visible: $data.isDetail()">
            <button type="button" class="close" data-bind="click: function(data, event) { $parent.ability().toggleAbilityDetail($index, data, event); }">&times;</button>
            <div data-bind="html: $parent.ability().getAbilityTooltipData($parent.hero().name(), $data.name())"></div>
            <div data-bind="if: $data.name() in $parent.ability().abilityData && $parent.ability().abilities()[$index()].level() > 0">
                <div class="col-md-8">
                    <div data-bind="template: { name: 'ability-settings-template', data: $parent.ability().abilitySettingsData($data.name(), $parent, $index()) }"></div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/html" id="ability-3-template">
    <tr class="row row3" data-bind="if: $data.displayname() != 'Empty' &&  ($data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_HIDDEN') == -1 || $data.name().indexOf('invoker_') != -1) && $data.behavior().indexOf('DOTA_ABILITY_BEHAVIOR_NOT_LEARNABLE') == -1,
    style: {clear: $data.name() == 'invoker_cold_snap' || $data.name() == 'invoker_chaos_meteor' ? 'both' : ''}">
        <td style="padding-bottom:10px;">
			<div style="width:80px;">
				<img style="padding:0px;margin-bottom:1px;" class="img-rounded" data-bind="attr:{src: '/media/images/spellicons/' + $data.name() + '.png'}"/>
				<div class="progress" style="position:relative">
					<div style="position:absolute;width:100%;color:white;" class="text-center" data-bind="visible: $parents[1].getAbilityLevelMax($data) > 0, text: $parent.getSkillBuildAbilityLevel($index()) + '/' + $parents[1].getAbilityLevelMax($data)"></div>
					<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;" data-bind="attr: { 'aria-valuenow': ($parents[1].getAbilityLevelMax($data) > 0 ? $parent.getSkillBuildAbilityLevel($index())/$parents[1].getAbilityLevelMax($data)*100 : 0) }, style: { width: ($parents[1].getAbilityLevelMax($data) > 0 ? $parent.getSkillBuildAbilityLevel($index())/$parents[1].getAbilityLevelMax($data)*100 : 0) + '%' }"></div>
				</div>
            </div>
        </td>
	<!-- ko foreach: new Array(25) -->
		<td style="padding-bottom:10px;vertical-align:top">
			<div class="pull-left btn btn-default btn-sm" style="line-height:78px;padding:0px;width:20px;" data-bind="text: $index()+1, css: {'toggled': $parents[1].skillBuild()[$index()]() == $parentContext.$index(), 'disabled allow-events': $parents[1].skillBuild()[$index()]() != -1 && $parents[1].skillBuild()[$index()]() != $parentContext.$index()}, click: function(data, event) { $parents[1].toggleAbilitySkillBuild($index(), $parentContext.$index(), $parentContext.$data, event); }"></div>
		</td>
	<!-- /ko -->
    </tr>
</script>

<script type="text/html" id="ability-settings-template">
<div class="form-horizontal">
<div data-bind="foreach: data">
<div class="form-group">
    <label class="col-md-6 control-label" data-bind="css: {'checkbox-label': controlType == 'checkbox'}, visible: (display == undefined || display != 'buff'), attr: {'for': labelName}, html: labelName"></label>
    <div data-bind="if: controlType == 'input' && (display == undefined || display != 'buff')">
        <div class="col-md-6"><input class="form-control" data-bind="attr: {'id': labelName}, value: controlVal"></div>
    </div>
    <div data-bind="if: controlType == 'checkbox' && (display == undefined || display != 'buff')">
        <div class="col-md-6">
            <div class="checkbox">
                <input type="checkbox" data-bind="attr: {'id': labelName}, checked: controlVal">
            </div>
        </div>
    </div>
    <div data-bind="if: controlType == 'text' && (display == undefined || display != 'buff')">
        <div class="col-md-6"><p class="form-control-static" data-bind="html: controlVal"></p></div>
    </div>
    <div data-bind="if: controlType == 'radio' && (display == undefined || display != 'buff')">
        <div class="col-md-6">
            <!-- ko foreach: controlOptions -->
            <div class="radio">
                <label>
                    <input type="radio" data-bind="attr: {'id': $parent.labelName + value, value: value}, checked: $parent.controlVal">
                    <span data-bind="text: text"></span>
                </label>
            </div>
            <!-- /ko -->
        </div>
    </div>
</div>
</div>
</div>
</script>

<script type="text/html" id="buff-settings-template">
<div class="form-horizontal">
<div data-bind="foreach: data">
<div class="form-group">
    <label class="col-md-6 control-label" data-bind="css: {'checkbox-label': controlType == 'checkbox'}, visible: (display == undefined || display == 'buff'), attr: {'for': labelName}, html: labelName"></label>
    <div data-bind="if: controlType == 'input' && (display == undefined || display == 'buff')">
        <div class="col-md-6"><input class="form-control" data-bind="attr: {'id': labelName}, value: controlVal"></div>
    </div>
    <div data-bind="if: controlType == 'checkbox' && (display == undefined || display == 'buff')">
        <div class="col-md-6">
            <div class="checkbox">
                <input type="checkbox" data-bind="attr: {'id': labelName}, checked: controlVal">
            </div>
        </div>
    </div>
    <div data-bind="if: controlType == 'text' && (display == undefined || display == 'buff')">
        <div class="col-md-6"><p class="form-control-static" data-bind="html: controlVal"></p></div>
    </div>
    <div data-bind="if: controlType == 'radio' && (display == undefined || display == 'buff')">
        <div class="col-md-6">
            <!-- ko foreach: controlOptions -->
            <div class="radio">
                <label>
                    <input type="radio" data-bind="attr: {'id': $parent.labelName + value, value: value}, checked: $parent.controlVal">
                    <span data-bind="text: text"></span>
                </label>
            </div>
            <!-- /ko -->
        </div>
    </div>
</div>
</div>
</div>
</script>

<script type="text/html" id="main-stat-template">
    <!-- ko foreach: section -->
        <div class="col-md-12" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
            <table class="table table-condensed">
                <tbody>
                <!-- ko foreach: $data -->
                    <tr>
                        <td data-bind="html: labelHtml"></td>
                        <!-- ko if: type == 'default' -->
                            <td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': hero, 'stat': stat } }"></td>
                        <!-- /ko -->
                    </tr>
                <!-- /ko -->
                </tbody>
            </table>
        </div>
    <!-- /ko -->
</script>

<script type="text/html" id="stat-template">
    <span data-bind="text: parseFloat(hero[stat]()).toString()"></span><span data-bind="html: $root.getDiffText(hero.diff[stat]()), diffCss: hero.diff[stat], diffCssStat: stat, visible: hero.showDiff"></span>
</script>

<script type="text/html" id="stats-additional-template">
    <table class="table table-condensed">
        <tbody>
            <tr><td>Base Strength:</td><td class="text-right"><span data-bind="text: hero().attributebasestrength"></span></td></tr>
            <tr><td>Strength Gain:</td><td class="text-right"><span data-bind="text: hero().attributestrengthgain"></span></td></tr>
            <tr><td>Base Agility:</td><td class="text-right"><span data-bind="text: hero().attributebaseagility"></span></td></tr>
            <tr><td>Agility Gain:</td><td class="text-right"><span data-bind="text: hero().attributeagilitygain"></span></td></tr>
            <tr><td>Base Intelligence:</td><td class="text-right"><span data-bind="text: hero().attributebaseintelligence"></span></td></tr>
            <tr><td>Intelligence Gain:</td><td class="text-right"><span data-bind="text: hero().attributeintelligencegain"></span></td></tr>
            <tr><td>Base Armor:</td><td class="text-right"><span data-bind="text: hero().armorphysical"></span></td></tr>
            <tr><td><abbr title="Base Armor + armor from base agility">Starting Armor:</abbr></td><td class="text-right"><span data-bind="text: parseFloat($data.startingArmor()).toString()"></span></td></tr>
            <tr><td>Base Magic Res:</td><td class="text-right"><span data-bind="text: hero().magicalresistance() + '%'"></span></td></tr>
            <tr><td>Base Attack Point:</td><td class="text-right"><span data-bind="text: hero().attackpoint"></span></td></tr>
            <tr><td><abbr data-bind="attr: { title: 'Total experience required to reach level ' + $data.selectedHeroLevel() }">Total Exp:</abbr></td><td class="text-right"><span data-bind="text: $data.totalExp()"></span></span></td></tr>
            <tr><td><abbr title="Experience required for next level">Next level exp:</abbr></td><td class="text-right"><span data-bind="html: $data.nextLevelExp()"></span></span></td></tr>
            <tr><td>Respawn Time:</td><td class="text-right"><span data-bind="text: $data.respawnTime()"></span></td></tr>
        </tbody>
    </table>
</script>

<script type="text/html" id="stats0-template">
    <div class="col-md-12 stats0" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
        <table class="table table-condensed">
        <tbody>
        <tr><td>Strength:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalStr' } }"></td></tr>
        <tr><td>Agility:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalAgi' } }"></td></tr>
        <tr><td>Intelligence:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalInt' } }"></td></tr>
        <tr><td><abbr title="Movement Speed">MS</abbr>:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalMovementSpeed' } }"></td></tr>
        <tr><td>Turn Rate:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalTurnRate' } }"></td></tr>
        <tr><td>Sight Range:</td><td class="text-right"><span data-bind="html: '<abbr title=\'Day\'>' + visionrangeday() + '</abbr>/<abbr title=\'Night\'>' + visionrangenight() + '</abbr>'"></span></td></tr>
        </tbody>
        </table>
    </div>
</script>

<script type="text/html" id="stats1-template">
    <div class="col-md-12 stats1" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
        <table class="table table-condensed">
        <tbody>
		<tr><td>Armor:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalArmorPhysical' } }"></td></tr>
        <tr><td>Health:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'health' } }"></td></tr>
        <tr><td>Health Regen:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'healthregen' } }"></td></tr>
        <tr><td>Mana:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'mana' } }"></td></tr>
        <tr><td>Mana Regen:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'manaregen' } }"></td></tr>
        <tr><td>Physical <abbr title="Effective Hit Points">EHP</abbr>:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'ehpPhysical' } }"></td></tr>
        <tr><td>Magical <abbr title="Effective Hit Points">EHP</abbr>:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'ehpMagical' } }"></td></tr>
        </tbody>
        </table>
    </div>
</script>

<script type="text/html" id="stats2-template">
    <div class="col-md-12 stats2" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
        <table class="table table-condensed">
        <tbody>
        <tr><td>%Phys Res:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalArmorPhysicalReduction' } }"></td></tr>
        <tr><td>%Magic Res:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalMagicResistance' } }"></td></tr>
        <tr><td>%Lifesteal:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'lifesteal' } }"></td></tr>
        <tr><td>%Evasion:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'evasion' } }"></td></tr>
        <tr><td>%Bash:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'bash' } }"></td></tr>
        <tr><td>%Miss Chance:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'missChance' } }"></td></tr>
        <tr><td colspan=2><a class="btn btn-default btn-block btn-xs" data-bind="css: {disabled: critInfo().sources.length == 0 ? 'disabled' : '', 'toggled': showCriticalStrikeDetails}, toggle: showCriticalStrikeDetails">Critical Strike Details</a></td></tr>
        </tbody>
        <tbody class="tabledropdown" style="border-top:0" data-bind="visible: showCriticalStrikeDetails(),foreach: critInfo().sources">
        <tr><td colspan=2><strong data-bind="text: $data.name"></strong></td></tr>
        <tr><td>Crit Chance:</td><td class="text-right"><span data-bind="text: ($data.totalchance * 100).toFixed(2) + '%'"></span></td></tr>
        <tr><td>Crit Multiplier:</td><td class="text-right"><span data-bind="text: ($data.multiplier * 100).toFixed(2) + '%'"></span></td></tr>
        </tbody>
        </table>
    </div>
</script>

<script type="text/html" id="stats3-template">
    <div class="col-md-12 stats3" data-bind="css: {'col-md-12': $root.layout() == 0, 'col-md-3': $root.layout() == 1}">
        <table class="table table-condensed">
        <tbody>
        <tr>
            <td>Damage:</td>
            <td class="text-right">
                <span data-bind="html: baseDamage()[0].toFixed(0)"></span>
                <span data-bind="html: $root.getDiffText(diff['baseDamage']()[0]), css: {'diffPos': diff['baseDamage']()[0] > 0, 'diffNeg': diff['baseDamage']()[0] < 0}, visible: showDiff"></span>
                <span>&ndash;</span>
                <span data-bind="html: baseDamage()[1].toFixed(0)"></span>
                <span data-bind="html: $root.getDiffText(diff['baseDamage']()[1]), css: {'diffPos': diff['baseDamage']()[1] > 0, 'diffNeg': diff['baseDamage']()[1] < 0}, visible: showDiff"></span>
                <span style="color:green" data-bind="visible: bonusDamage() > 0, html: ' + ' + bonusDamage().toFixed(0)"></span>
                <span data-bind="html: $root.getDiffText(diff['bonusDamage']()), css: {'diffPos': diff['bonusDamage']() > 0, 'diffNeg': diff['bonusDamage']() < 0}, visible: showDiff"></span>
                <span style="color:red" data-bind="visible: bonusDamageReduction() != 0, html: ' - ' + bonusDamageReduction().toFixed(0)"></span>
                <span data-bind="html: $root.getDiffText(diff['bonusDamageReduction']()), css: {'diffPos': diff['bonusDamageReduction']() > 0, 'diffNeg': diff['bonusDamageReduction']() < 0}, visible: showDiff"></span>
            </td>
        </tr>
        <tr><td><abbr title="Increased Attack Speed">IAS</abbr>:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'ias' } }"></td></tr>
        <tr><td><abbr title="Base Attack Time">BAT</abbr>:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'bat' } }"></td></tr>
        <tr><td>Attack Time:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'attackTime' } }"></td></tr>
        <tr><td>Attack &frasl; Sec:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'attacksPerSecond' } }"></td></tr>
        <tr><td>Attack Range:</td><td class="text-right" data-bind="template: { name: 'stat-template', data: {'hero': $data, 'stat': 'totalattackrange' } }"></td></tr>
        <tr><td colspan=2><a class="btn btn-default btn-block btn-xs" data-bind="toggle: showDamageDetails, css: {'toggled': showDamageDetails}">Damage Details</a></td></tr>
        </tbody>
        </table>
    </div>
</script>